<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <title>Peque√±a demo de la API User Idle Detection</title>
  </head>
  <body>
    <script>
      const log = (msg) => document.write(`<div>${msg}</div>`) ;

      async function boot() {
        if (!window.IdleDetector) {
          log('IdleDetector no est√° soportado :(');
          return;
        }

        log('IdleDetector disponible! Vamo a jugar al bosque!');

        try {
          // El m√≠nimo son 60 segundos
          let idleDetector = new IdleDetector({ threshold: 60 });
          idleDetector.addEventListener('change', e => {
            const { user, screen } = idleDetector.state;
            log(`${new Date().toLocaleTimeString()} - El usuario est√° ${user}, y la pantalla ${screen}`);
          });
          await idleDetector.start();
        } catch (err) {
          // Puede haber algunos errores por permisos, por lo que le√≠, aunque no lo pude reproducir.
          log(`ü§ñ Peligro Peligro ü§ñ: ${err}.`);
        }
      };

      boot();
    </script>
  </body>
</html>
